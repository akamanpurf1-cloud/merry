<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <title>Merry Christmas Akash</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      background: linear-gradient(135deg, #0b1026, #1b2940);
      color: #fff; font-family: sans-serif;
      display: grid; place-items: center; min-height: 100vh;
      margin: 0; padding: 0;
    }
    .card {
      text-align: center; padding: 24px; border-radius: 16px;
      background: rgba(255,255,255,0.08); backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35); max-width: 680px;
    }
    h1 { font-size: 2.2rem; margin: 0 0 8px; }
    h2 { font-size: 1.6rem; margin: 8px 0 16px; color: #ffd27a; }
    p  { margin: 6px 0; opacity: 0.9; }
    .name { font-weight: 700; color: #88ffdc; }
    .santa {
      width: 100%; max-width: 400px;
      border-radius: 12px;
      margin: 0 auto 16px;
      animation: idle 2s infinite;
    }
    .talking { animation: talk 0.3s infinite; }
    @keyframes talk {
      0% { transform: scaleY(1); }
      50% { transform: scaleY(0.95); }
      100% { transform: scaleY(1); }
    }
    @keyframes idle {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    .btns { margin-top: 18px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    button {
      border: none; border-radius: 10px; padding: 10px 14px; cursor: pointer;
      background: #2ec4b6; color: #001219; font-weight: 700;
    }
    button.secondary { background: #ff9f1c; color: #1a1a1a; }
    small { display: block; margin-top: 10px; opacity: 0.7; }
  </style>
</head>
<body>
  <div class="card">
    <img src="santa-scene.jpeg" alt="Santa Christmas Scene" class="santa" id="santa" />
    <h1>ðŸŽ„ Merry Christmas!</h1>
    <h2 id="line">Welcome</h2>
    <p id="hindi"></p>
    <div class="btns">
      <button id="speakBtn">ðŸ”Š Phirse sunao</button>
      <button class="secondary" id="shareBtn">ðŸ“² WhatsApp par share</button>
    </div>
    <small>Tip: Link me <code>?name=Akash</code> add karo, ya Share button use karo.</small>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const rawName = params.get('name') || '';
    const name = rawName.trim() || 'Dost';
    const englishLine = `Merry Christmas, ${name}!`;
    const hindiLine   = `à¤®à¥‡à¤°à¥€ à¤•à¥à¤°à¤¿à¤¸à¤®à¤¸, ${name}!`;

    document.getElementById('line').textContent = englishLine;
    document.getElementById('hindi').textContent = hindiLine;

    let voices = [];
    function speakOnce() {
      const santa = document.getElementById('santa');
      const utter = new SpeechSynthesisUtterance();
      const hiVoice = voices.find(v => /hi-|Hindi|India/i.test(v.lang) || /Hindi/i.test(v.name));
      const enVoice = voices.find(v => /en-/i.test(v.lang));
      utter.voice = hiVoice || enVoice || null;
      utter.text = hiVoice ? hindiLine : englishLine;
      utter.rate = 1.0;
      utter.pitch = 1.0;
      utter.onstart = () => santa.classList.add('talking');
      utter.onend   = () => santa.classList.remove('talking');
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utter);
    }

    function loadVoicesThenSpeak() {
      voices = window.speechSynthesis.getVoices();
      if (!voices || voices.length === 0) {
        window.speechSynthesis.onvoiceschanged = () => {
          voices = window.speechSynthesis.getVoices();
          speakOnce();
        };
      } else {
        speakOnce();
      }
    }

    // Auto speak on page load
    if (name) loadVoicesThenSpeak();

    document.getElementById('speakBtn').addEventListener('click', loadVoicesThenSpeak);

    // WhatsApp direct share
    document.getElementById('shareBtn').addEventListener('click', () => {
      const nm = prompt('Kisko bhejna hai? Naam likho:', name);
      if (!nm) return;
      const base = window.location.origin + window.location.pathname;
      const link = `${base}?name=${encodeURIComponent(nm.trim())}`;
      const msg = `ðŸŽ„ Merry Christmas ${nm}! Dekho ye surprise: ${link}`;
      const wa = `whatsapp://send?text=${encodeURIComponent(msg)}`;
      window.location.href = wa;
    });
  </script>
</body>
</html>
