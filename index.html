<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Merry Christmas â€“ Personalized</title>
  <style>
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #0b1026, #1b2940);
      color: #fff;
      margin: 0; padding: 0;
      display: grid; place-items: center; min-height: 100vh;
    }
    .card {
      text-align: center; padding: 24px; border-radius: 16px;
      background: rgba(255,255,255,0.08); backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35); max-width: 680px;
    }
    h1 { font-size: 2.2rem; margin: 0 0 8px; }
    h2 { font-size: 1.6rem; margin: 8px 0 16px; color: #ffd27a; }
    p  { margin: 6px 0; opacity: 0.9; }
    .name { font-weight: 700; color: #88ffdc; }
    .btns { margin-top: 18px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    button {
      border: none; border-radius: 10px; padding: 10px 14px; cursor: pointer;
      background: #2ec4b6; color: #001219; font-weight: 700;
    }
    button.secondary { background: #ff9f1c; color: #1a1a1a; }
    small { display: block; margin-top: 10px; opacity: 0.7; }
  </style>
</head>
<body>
  <div class="card">
    <h1>ðŸŽ„ Merry Christmas!</h1>
    <h2 id="line">Welcome</h2>
    <p id="hindi"></p>
    <div class="btns">
      <button id="speakBtn">ðŸ”Š Phirse sunao</button>
      <button class="secondary" id="shareBtn">ðŸ“² WhatsApp par share</button>
    </div>
    <small>Tip: Link me <code>?name=Anuj</code> add karo, jaise: <code>.../merry/?name=Anuj</code></small>
  </div>

  <script>
    // Get name from URL: ?name=Anuj
    const params = new URLSearchParams(window.location.search);
    const rawName = params.get('name') || '';
    const name = (rawName || '').trim();

    // Build messages
    const displayName = name ? name : 'Dost';
    const englishLine = `Merry Christmas, ${displayName}!`;
    const hindiLine   = `à¤®à¥‡à¤°à¥€ à¤•à¥à¤°à¤¿à¤¸à¤®à¤¸, ${displayName}!`;

    // Put on page
    document.getElementById('line').textContent = englishLine;
    document.getElementById('hindi').textContent = hindiLine;

    // Speech: try Hindi voice, fallback to English
    let voices = [];
    function speakOnce() {
      const utter = new SpeechSynthesisUtterance();
      // Prefer Hindi voice if available
      const hiVoice = voices.find(v => /hi-|Hindi|India/i.test(v.lang) || /Hindi/i.test(v.name));
      const enVoice = voices.find(v => /en-/i.test(v.lang));
      utter.voice = hiVoice || enVoice || null;

      // If Hindi voice chosen, speak Hindi; else English
      utter.text = hiVoice ? hindiLine : englishLine;
      utter.rate = 1.0;    // speed
      utter.pitch = 1.0;   // tone
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utter);
    }

    function loadVoicesThenSpeak() {
      voices = window.speechSynthesis.getVoices();
      if (!voices || voices.length === 0) {
        // Some browsers load voices asynchronously
        window.speechSynthesis.onvoiceschanged = () => {
          voices = window.speechSynthesis.getVoices();
          speakOnce();
        };
      } else {
        speakOnce();
      }
    }

    // Auto speak on page load (if name present)
    if (name) {
      loadVoicesThenSpeak();
    }

    // Buttons
    document.getElementById('speakBtn').addEventListener('click', loadVoicesThenSpeak);

    // Simple WhatsApp share with same page, ask for a name
    document.getElementById('shareBtn').addEventListener('click', () => {
      const nm = prompt('Kisko bhejna hai? Naam likho:', 'Anuj');
      if (!nm) return;
      const base = window.location.origin + window.location.pathname;
      const link = `${base}?name=${encodeURIComponent(nm.trim())}`;
      const msg = `ðŸŽ„ Merry Christmas ${nm}! Ye link kholo: ${link}`;
      // WhatsApp Web/Mobile share
      const wa = `https://wa.me/?text=${encodeURIComponent(msg)}`;
      window.open(wa, '_blank');
    });

    // Fallback: if no name, invite user to add it
    if (!name) {
      document.querySelector('small').textContent =
        'Tip: Link ke end me ?name=Anuj add karo, ya Share button use karo.';
    }
  </script>
</body>
</html>
